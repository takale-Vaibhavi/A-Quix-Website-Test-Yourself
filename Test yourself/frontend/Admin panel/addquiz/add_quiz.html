<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Add New Quiz</title>
  <link rel="stylesheet" href="add_quiz.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-5">
    <a href="../admin.html" class="back-btn">‚Üê Back to Admin</a>
    <h1 class="my-4">Add New Quiz Question</h1>

    <form id="addQuestionForm">
      <!-- Select Age Group -->
      <div class="mb-3">
        <label for="ageGroup" class="form-label">Select Age Group</label>
        <select class="form-select" id="ageGroup" required>
          <option value="">--Select Age Group--</option>
          <option value="7-9">7-9</option>
          <option value="10-12">10-12</option>
          <option value="13-15">13-15</option>
          <option value="16-18">16-18</option>
          <option value="19-21">19-21</option>
          <option value="22+">22+</option>
        </select>
      </div>

      <!-- Select Topic -->
      <div class="mb-3">
        <label for="topic" class="form-label">Select Topic</label>
        <select class="form-select" id="topic" required>
          <option value="">--Select Topic--</option>
        </select>
      </div>

      <!-- Question Text -->
      <div class="mb-3">
        <label for="question" class="form-label">Question</label>
        <textarea class="form-control" id="question" rows="3" required></textarea>
      </div>

      <!-- Options -->
      <div class="mb-3">
        <label class="form-label">Options</label>
        <input type="text" class="form-control mb-2 option-input" placeholder="Option 1" required>
        <input type="text" class="form-control mb-2 option-input" placeholder="Option 2" required>
        <input type="text" class="form-control mb-2 option-input" placeholder="Option 3" required>
        <input type="text" class="form-control mb-2 option-input" placeholder="Option 4" required>
      </div>

      <!-- Correct Answer -->
      <div class="mb-3">
        <label for="correctAnswer" class="form-label">Correct Answer</label>
        <input type="text" class="form-control" id="correctAnswer" required>
      </div>

      <button type="submit" class="btn btn-success">Add Question</button>
    </form>
  </div>
  <script>
    const topicsByAgeGroup = {
      "7-9": ["Math", "Science", "English", "General Knowledge",
              "Logical Reasoning", "Creativity","Animals & Nature","Sport & Fun"],
      "10-12": ["Mathematics", "Science", "English", "History & Civics",
                "Geography", "Logical Reasoning", "Digital Literacy", "Creativity & Arts"],
      "13-15": ["Mathematics", "Science", "English", "Social Studies",
                "Logical Reasoning", "Digital Literacy", "Creativity & Arts", "General Knowledge"],
      "16-18": ["Mathematics", "Physics", "Chemistry", "Biology", "Computer Science", 
                "English & Literature", "Logical Reasoning", "General Knowledge"],
      "19-21": ["Advanced Mathematics", "Physics", "Chemistry", "Biology", "Computer Science",
                "Economics & Business", "Logical Reasoning & Aptitude", "GK & Current Affairs"],
      "22+": ["Advanced Mathematics", "Physics", "Chemistry", "Biology", "Computer Science & IT",
              "Business & Management", "Logical Reasoning & Aptitude", "Current Affairs & GK"]
    };
    
    const ageGroupSelect = document.getElementById('ageGroup');
    const topicSelect = document.getElementById('topic');
    
    ageGroupSelect.addEventListener('change', () => {
      const selectedAge = ageGroupSelect.value;
      topicSelect.innerHTML = '<option value="">--Select Topic--</option>';
      if (selectedAge && topicsByAgeGroup[selectedAge]) {
        topicsByAgeGroup[selectedAge].forEach(topic => {
          const option = document.createElement('option');
          option.value = topic;
          option.textContent = topic;
          topicSelect.appendChild(option);
        });
      }
    });
    
    // Form submission
    document.getElementById('addQuestionForm').addEventListener('submit', (e) => {
      e.preventDefault();
    
      const ageGroup = ageGroupSelect.value;
      const topic = topicSelect.value;
      const question = document.getElementById('question').value;
      const options = Array.from(document.querySelectorAll('.option-input')).map(input => input.value);
      const correctAnswer = document.getElementById('correctAnswer').value;
    
      const data = {
        age_group: ageGroup,
        topic: topic,
        question: question,
        options: options,
        correct_answer: correctAnswer
      };
    
      fetch('http://localhost:3000/api/questions', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      }).then(res => res.json())
        .then(response => {
          alert('Question added successfully!');
          document.getElementById('addQuestionForm').reset();
          topicSelect.innerHTML = '<option value="">--Select Topic--</option>';
        }).catch(err => console.error(err));
    });
    </script>
    




</body>
</html>
